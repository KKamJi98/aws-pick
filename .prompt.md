# AWS Pick – .prompt.md  
> **Purpose:** AWS 프로파일을 손쉽게 전환하는 CLI **awspick** 개발·유지보수를 위한 공통 작업 규칙과 요구사항 명세

---

## Rules
1. **README 우선 갱신** – 기능 추가·변경 PR은 반드시 `README.md`를 함께 수정한다.  
2. **품질 게이트 필수** – 모든 커밋은 `black`, `isort`, `pytest`를 통과해야 한다.  
3. **커밋 컨벤션** – Conventional Commits 사용  
   * 예) `feat(cli): 숫자·이름 선택 로직 구현`, `docs(readme): 사용 예 추가`  
4. **Poetry + direnv** – 루트 `.envrc` 에 `layout poetry` 선언으로 동일 가상환경 사용.  
5. **.prompt.md gitignore 포함** – 배포 패키지 제외, 그러나 Git 히스토리로 추적.  
6. **공식 문서·Best Practice 준수** – boto3, AWS, Python 패키징 가이드라인을 따른다.  
7. **확장성·가독성** – 타입 힌트, 순수 함수, 모듈화 구조 유지.  
8. **History 관리** – 주요 변경 시 _History_ 섹션 맨 위에 날짜·작성자·요약 한 줄 추가.

---

## Requirements
### 기능 요구
* `~/.aws/config`에서 프로파일 목록을 읽어 **번호+이름**으로 출력.  
* 입력값으로 **번호** 또는 **프로파일 이름** 모두 허용.  
* 잘못된 입력(범위 밖 숫자·존재하지 않는 이름·빈 문자열)은 재입력 요청.  
* 선택 결과를 `~/.zshrc`의 `export AWS_PROFILE=<선택>` 줄로 **치환**(없으면 추가)하고, 백업 파일을 `.bak-YYYYMMDDHHMMSS` 형식으로 남긴다.

### 비기능 요구
* Python ≥ 3.9, 외부 의존성은 `boto3`, `tabulate`만 사용.  
* 입력 검증·파일 패치 로직 단위 테스트 **100 % 커버리지**.  
* 멱등성 보장 – 같은 프로파일 선택 시 중복 수정 없음.  
* `logging` 모듈로 주요 단계 INFO, 오류는 ERROR 레벨 기록.  
* Poetry `scripts=` 로 CLI 진입점 **awspick** 제공.
* 프로젝트 루트에 `aws_pick.py` 단일 파일 런처 제공.

---

## History

Date | Author | Change Summary
--- | --- | ---
2025-06-05 | 깜지 | 단일 파일 런처 추가 및 패키지 임포트 경로 수정
2025-06-05 | 깜지 | 프로젝트명·CLI명 변경 (aws-profile-switcher/awswitch → aws-pick/awspick)
2025-06-05 | 깜지 | 최초 Rules·Requirements·History 작성
